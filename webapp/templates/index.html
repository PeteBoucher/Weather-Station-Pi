<!doctype html>
<html lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico in the root directory -->
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <!-- Add your site or application content here -->
        <h1>Raspberry Pi Weather Station</h1>
        <h2>Current conditions</h2>
        <h3>Temperature {{ '{:.0f}'.format(conditions[1]) }}&deg;C</h3>
        <h3>Pressure {{ '{:.0f}'.format(conditions[2]) }} mBar</h3>
        <h3>Relative Humidity {{ '{:.0f}%'.format(conditions[3]) }}</h3>
        <h3>Wind Speed {{ '{:.0f}km/h'.format(conditions[5]) }}</h3>
        <p>Reading taken at {{ conditions[4] }} UTC</p>
        <p>{{ conditions[0] }}</p>
	<h2>Records</h2>
	<table>
		<tr><td></td><th>Temp</th><th>Pressure</th><th>Humidity</th><th>Wind Speed</th></tr>
		<tr>
            <th>Max</th>
            <td>{{ '{:.1f}'.format(record['temp']['max']) }}</td>
            <td>{{ '{:.0f}'.format(record['press']['max']) }}</td>
            <td>{{ '{:.1f}%'.format(record['humid']['max']) }}</td>
            <td>{{ '{:.1f}km/h'.format(record['wind_speed']['max']) }}</td>
        </tr>
		<tr>
            <th>Min</th>
            <td>{{ '{:.1f}'.format(record['temp']['min']) }}</td>
            <td>{{ '{:.0f}'.format(record['press']['min']) }}</td>
            <td>{{ '{:.1f}%'.format(record['humid']['min']) }}</td>
            <td>{{ '{:.1f}kmh'.format(record['wind_speed']['min']) }}</td>
        </tr>
	</table>
        <a href="/log">View raw log</a>
        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.12.0.min.js"><\/script>')</script>
	<script>
	  // Setup the server sent event endpoint
	  var conditionsSource = new EventSource("{{ url_for('temp') }}");
	  conditionsSource.message = function(e) {
	    console.log(e.data);
	  }
	</script>
    </body>
</html>
